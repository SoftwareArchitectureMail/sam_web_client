<div class="subtittle">
  Recibidos
</div>

<input
type='text'
style='padding:8px;margin:15px auto;width:30%;'
placeholder='¿Quién te envió el mensaje?'
(keyup)='updateFilter($event)'
/>
<ngx-datatable
#inbox
class="material"
[columnMode]="'force'"
[headerHeight]="0"
[footerHeight]="50"
[rowHeight]="40"
[scrollbarH]="true"
[rows]="rows"
[limit]="10"
[selected]="selected"
[selectionType]="'checkbox'"
(select)='onSelect($event)'
>
<ngx-datatable-column
[width]="30"
[canAutoResize]="false"
[checkboxable]="true">
</ngx-datatable-column>
<ngx-datatable-column name="urgent" [width]="30" [canAutoResize]="false">
  <ng-template let-value="value" ngx-datatable-cell-template>
    <div *ngIf="value;">
      <i class="fa fa-exclamation-circle" aria-hidden="true" style="color:red;"></i>
    </div>
  </ng-template>
</ngx-datatable-column>

<ngx-datatable-column name="sender" [width]="80">
  <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
      <div *ngIf="!row.read; else unread">
          <div style="color:black ">
          <strong>{{value}}</strong>
        </div>
      </div>
      <ng-template #unread>
        <div>
          {{value}}
        </div>
      </ng-template>
  </ng-template>
</ngx-datatable-column>
<ngx-datatable-column prop="read"[width]="30" [canAutoResize]="false">
  <ng-template let-value="value" ngx-datatable-cell-template>
    <div *ngIf="value; else unread">
      <i class="fa fa-envelope-open-o" aria-hidden="true"></i>
    </div>
    <ng-template #unread><i class="fa fa-envelope" aria-hidden="true"></i></ng-template>
  </ng-template>
</ngx-datatable-column>
<ngx-datatable-column prop="attachment"[width]="30" [canAutoResize]="false">
  <ng-template let-value="value" ngx-datatable-cell-template>
    <div *ngIf="value.url;">
      <i class="fa fa-paperclip" aria-hidden="true"></i>
    </div>
  </ng-template>
</ngx-datatable-column>
<ngx-datatable-column name="subject" [width]="200">
  <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
    <div (click)="getMail(row.id)" class="btn-subject">
      <div *ngIf="!row.read; else unread">
          <div style="color:black ">
          <strong>{{value}}</strong>
        </div>
      </div>
      <ng-template #unread>
        <div>
          {{value}}
        </div>
      </ng-template>
    </div>
  </ng-template>
</ngx-datatable-column>
<ngx-datatable-column prop="message_body" [width]="300">

  <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
    <div *ngIf="!row.read; else unread">
      <strong><div [innerHTML]="value" style="color:black"></div></strong>
    </div>
    <ng-template #unread>
        <div [innerHTML]="value"></div>
    </ng-template>
    </ng-template>
  </ngx-datatable-column>

<ngx-datatable-column prop="created_at">
  <ng-template let-value="value" ngx-datatable-cell-template>
    <div *ngIf="(value | date ) != (today|date); else otherDate" >
       {{value | date: 'd MMM' }}
    </div>
    <ng-template #otherDate>{{ value | date : 'shortTime'}}</ng-template>
  </ng-template>


</ngx-datatable-column>
</ngx-datatable>


<!--
<div class='selected-column'>
  <h4>Selections <small>({{selected?.length}})</small></h4>
  <ul>
    <li *ngFor='let sel of selected'>
      {{sel.subject}}
    </li>
    <li *ngIf="!selected?.length">No Selections</li>
  </ul>
</div>
-->
